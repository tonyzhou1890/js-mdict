import { Benchmark } from 'benchmark';

import Mdict from '../src/mdict';

const suite = new Benchmark.Suite();

// loading dictionary
const startTime = new Date().getSeconds();
const mdict = new Mdict('mdx/testdict/简明英汉汉英词典.mdx', { mode: 'mixed' });
const endTime = new Date().getSeconds();
// eslint-disable-next-line
console.log(`Mdict#loading time: ${endTime - startTime} sec`);

// 要判断是否存在的单词列表
let keys = 'in,the,be,of,and,to,have,it,that,as,you,we,more,all,are,can,for,your,life,not,or,one,but,will,well,long,out,man,our,world,each,only,this,an,about,us,need,who,wa,book,ha,my,give,same,found,rest,call,end,three,than,these,young,though,hope,begin,change,before,enemy,50,today,course,now,success,year,few,hour,final,bear,effort,north,war,country,itself,beginning,god,ago,hand,answer,service,battle,burden,struggle,common,grand,south,fellow,american,again,20,60,freedom,citizen,generation,national,arm,patient,failure,since,disease,east,west,16,18,24,30,80,observe,party,almighty,quarter,mine,summon,grave,surround,trumpet,summons,arms,twilight,rejoicing,against,poverty,forge,assure,mankind,history,grant,granted,maximum,victory,celebration,symbolize,symbolizing,signify,renewal,swear,sworn,solemn,oath,forebear,prescribe,prescribed,nearly,century,quarters,hands,testimony,loyalty,graves,graf,globe,embattle,embattled,rejoice,tribulation,tyranny,global,alliance,fruitful,join,live,do,on,with,good,so,time,there,love,no,like,even,what,they,then,go,best,here,people,when,by,take,at,most,true,last,let,their,from,he,think,over,work,own,if,better,see,get,feel,human,would,great,hi,make,fear,know,new,mean,much,part,come,being,say,far,bad,which,them,some,day,living,very,don,meet,find,set,must,little,never,down,just,first,still,doubt,past,back,after,aft,old,deep,emotion,future,present,key,general,care,face,worth,season,happiness,instead,boss,activity,control,assume,situation,message,problem,door,duty,stay,soul,helpless,false,relate,related,sent,preserve,significance,enjoy,enjoyment,discipline,ways,security,compassionate,adversity,works,pool,motion,ripple,exact,beggar,invalid,triumph,awed,blame,authority,timing,appropriately,response,send,dignity,involve,involved,freely,postpone,enhance,controlling,peoples,isolate,isolated,commit,committed,improve,improving,powerless,pebble,drop,widening,stevenson,sort,alone,may,away,clear,other,light,men,those,up,inside,negative,any,power,interest,die,through,into,right,mind,use,winner,minute,person,play,full,thought,next,worry,stop,abundance,every,often,me,look,game,meaning,yourself,goodness,should,thinking,thing,way,chance,age,experience,space,short,ambition,keep,high,want,real,self,really,beauty,ve,enough,heart,seek,always,place,upon,field,how,less,sun,too,mirror,such,many,station,off,deal,small,because,put,things,happy,become,open,moment,together,earth,dead,shall,character,joy,worse,born,blind,dream,drive,spirit,company,middle,normal,wrong,empty,state,ourselves,blue,shine,someone,tell,death,simple,wind,allow,ground,word,am,lose,line,others,turn,eye,lie,choose,quality,learn,two,second,felt,purpose,him,value,read,try,view,longer,lack,carry,believe,ask,sense,cannot,note,nor,measure,himself,concern,re,hold,yet,form,something,sometimes,desire,daily,soon,stone,star,bring,serve,lead,knowing,fit,increase,also,alive,ever,another,said,lost,friend,circle,corner,mellow,touch,seem,easy,action,garden,notice,piece,class,days,hours,seeing,hearing,individual,themselves,wave,summer,pass,corn,reach,watch,name,step,account,dog,build,timid,fourth,loose,bank,conquer,alarm,curb,taxi,coming,fifth,interior,approach,timidity,powerful,rid,york,push,surprise,sight,grow,single,rust,mortal,upset,home,room,house,sleep,choice,gift,within,head,rate,incident,aim,sentence,firm,matter,egg,basket,stretch,help,dedicate,large,speak,once,music,where,morning,mountain,around,spring,knowledge,loving,hear,times,pleasure,professional,society,act,discover,realize,laugh,kind,companion,show,destroy,drift,endeavor,judge,forth,years,father,equal,might,brave,above,remember,rather,thus,task,cause,birth,famous,speaking,means,narrow,going,passion,while,cold,hollow,hill,red,flower,break,image,left,telling,between,free,front,reflection,spend,further,least,start,working,acting,stupid,behind,pretend,center,branch,trip,pull,waiting,cry,buy,regret,tomorrow,voice,cycle,number,wonder,without,thick,main,conflict,writer,return,third,hurt,given,limited,release,exercise,fast,half,bottom,point,early,prime,pain,constant,ill,deaf,truly,finally,whether,reward,nation,dedicated,grind,forget,fight,advance,concerned,acquire,interested,business,merely,exist,noble,woods,wood,awe,could,accord,according,wing,reason,event,consider,everything,respect,order,able,although,whose,office,child,both,win,potential,nature,sign,calm,sweet,isn,sunset,grasp,lonely,desert,appear,run,walk,limit,strong,understand,immerse,recovery,recover,percent,condition,top,sought,sound,shrink,energy,sure,seven,resolve,under,six,shakespeare,relations,relation,regular,picture,international,gain,object,physical,listen,fine,sunrise,rise,rising,gaze,rock,impress,tint,scene,bud,bird,eternal,circumstances,circumstance,excuse,eyes,instance,catch,opportunity,hostile,function,likely,ll,usually,else,willing,figure,late,strain,offer,hard,fortune,natural,holiday,ordinary,essential,aware,imagine,performance,mask,wide,possess,secret,healthy,moral,proportion,green,grass,precious,almost,leaf,fall,appreciate,petty,vision,drink,plant,row,certain,sooner,ice,giving,miss,money,body,fantasy,doesn,ability,string,solitude,abroad,among,night,sit,rule,square,skin,devil,shower,decay,slight,wake,otherwise,stage,style,dust,kindness,air,trust,whatever,courage,paper,quiet,shadow,suffer,wisdom,possible,despair,spiritual,wall,stress,negativity,cheat,nothing,taking,move,process,personal,job,bed,forward,theory,parent,beloved,team,flood,neighbor,waste,worst,heat,spare,celebrate,celebrated,public,material,infinite,position,broom,partner,matte,matt,mat,concentrate,capital,brain,eggs,round,wound,union,stroke,decide,faculty,labor,price,youth,author,story,doomed,adult,wrinkle,responsibility,welcome,devotion,sacrifice,bless,blessing,create,engage,endure,proper,consecrate,poor,remain,outside,words,literature,woman,question,saying,simply,deeply,unhappy,idea,imagination,october,fore,wild,spread,grey,fog,steal,holding,hang,beyond,already,valley,purple,rich,darkness,ocean,attention,force,accept,virtue,reflect,share,particularly,myself,encounter,learning,hardly,useful,keen,appetite,taste,significant,hide,afraid,separate,totally,bound,peace,realized,presence,probably,universe,unfold,sea,overflow,anxiety,passing,hillside,city,pace,wait,pay,twin,count,mile,swim,gone,numb,tragedy,brief,stand,dear,student,crowd,important,azure,weather,mock,fly,poem,rhythm,beat,follow,trying,ease,movement,ear,require,compassion,everywhere,vista,blow,made,opposite,near,cut,fell,quickly,ok,breath,stuff,influence,health,faster,slow,romance,scatter,scattered,flip,flop,dry,fat,yield,brown,regard,art,subordinate,sweep,content,adopt,save,steep,cover,ecstasy,loneliness,toward,whole,sham,achievement,iron,scotch,hero,manifold,exchange,glow,fire,america,strength,land,fourscore,continent,conceive,liberty,proposition,engaged,portion,altogether,fitting,larger,add,remaining,increased,highly,died,government,hamlet,richly,abundantly,philosopher,everyone,therefore,definition,saw,range,unfortunately,routine,apart,occupation,sport,accomplishment,variety,subject,contact,town,china,novel,immediate,widen,shoulder,edge,wavering,upland,creep,skirt,cling,arise,fold,depth,autumn,gold,olive,floating,suddenly,amber,rose,lit,curtain,alike,dispel,hoof,wings,soft,perhaps,neither,countenance,beam,curious,offense,defect,formed,leave,discredit,trivial,hundred,greatness,cross,humor,particular,serf,beautiful,click,known,feeling,sharing,positive,example,crazy,especially,dislike,questioning,similar,distant,safe,starting,attempt,mental,benefit,relief,divide,divided,toil,bore,manual,week,sweat,playing,baseball,worrying,serious,trifling,weekend,rational,industrious,former,factory,belong,vacation,alternative,indeed,interval,unique,touching,respond,maintain,knowledgeable,fact,however,cure,glance,habit,unimaginable,grateful,invariable,degree,attain,temple,tree,haunt,gleam,hue,shell,cloud,tender,worm,tread,dance,study,admiration,source,fields,pas,relish,span,train,nearby,waving,smoke,ad,rolling,uppermost,band,flag,puzzle,aisle,minutes,kid,college,mortgage,later,constantly,mad,regrets,yesterday,thief,climb,eat,cream,barefoot,river,along,lot,bare,contribution,lifetime,driven,immortal,baby,grown,spark,flame,risk,expose,flesh,trade,construct,frustrate,frustrated,perception,unfolding,truth,fade,strung,series,bend,depart,chamber,hive,solitary,farmer,chop,recreation,latter,meal,cheese,frequent,meeting,post,sociable,stumble,nobody,pond,loud,water,except,legion,pasture,bean,sorrel,horse,april,thaw,biological,growth,innocent,childhood,mature,ideal,manhood,tension,mellowing,fruit,wine,gradual,cynical,kindly,endocrine,decrease,philosophy,pattern,contentment,flicker,theme,discordant,harsh,melody,shoot,jump,original,education,tempo,pleasing,flowing,noon,fool,impossible,deny,chinese,religious,scheme,greatest,compliment,cupboard,system,bath,gentleness,outward,moon,brightness,challenge,profession,possibility,assistant,guarantee,breathe,yours,anything,abundant,shoe,box,closet,required,higher,universal,humble,needs,walking,clock,avoid,won,basic,five,hum,slide,drifting,indecision,sword,overcaution,devote,healing,magnificent,detail,shining,vividly,treasure,delight,scream,rage,wise,masefield,poet,laureate,sober,assurance,observation,spot,active,mere,song,pair,turned,pressure,fair,anger,yes,sitting,entire,surprised,exhale,following,behavior,speed,issue,overcome,actor,script,progress,spent,precedent,swing,cherish,cherished,pet,scale,marriage,son,boat,swimming,manifest,snail,pile,drought,lyric,tune,royal,spirits,looking,offset,savor,halcyon,recent,slump,harvest,blistering,planting,rain,standing,winter,crib,stalk,heel,tip,husk,crop,flourish,during,develop,conceal,practice,attach,attached,sake,obscure,display,king,commercial,venture,bundle,contradictory,store,month,veterinary,minister,leading,businessman,thrust,career,introduce,sweeping,sweeper,absent,boy,necessary,clerk,fail,tumble,fault,concentration,enter,bar,surplus,cash,fund,ultimate,beckon,pinion,lay,crown,height,caress,quiver,root,shake,floor,tear,naught,melt,running,brook,wounded,understanding,dawn,praise,lip,search,pity,suffering,anguish,verge,shivering,rim,mystic,miniature,heaven,saint,wish,sway,flux,upward,echo,evil,demand,attack,departed,boring,myth,remove,refuse,decision,ours,excellent,motto,idleness,advantage,gate,guard,entrance,science,industry,bright,treasury,quarry,busy,bead,direct,directed,faithful,companionship,distress,receive,bond,sympathize,favorite,product,survive,fresh,page,effect,excerpt,doom,attitude,values,vigor,appreciation,epicurean,appreciative,permanent,seldom,until,silence,teach,cheek,supple,adventure,distrust,bow,lure,wireless,cheer,aerial,snow,historic,role,defend,defending,danger,faith,standard,conscience,deeds,deed,asking,civil,test,testing,battlefield,hallow,consecrated,detract,unfinished,nobly,advanced,honor,honored,vain,perish,bible,spoken,aloud,eagerly,dully,meanly,scarcely,wanted,occasionally,existence,intensity,constitute,constituted,ed,extent,poetry,prose,unselfish,friendship,politics,affairs,affair,contrariwise,pessimist,bacon,dy,supremely,confine,confined,welfare,cir,conscribed,interesting,intently,surroundings,intensely,depend,intensify,woodland,warmth,peep,raise,raised,heavily,waver,beneath,dew,dip,dipped,stole,column,subtly,shelter,grassland,glide,gliding,drapery,awaken,awakened,stately,memory,tempest,owned,touched,towards,bridegroom,float,gladsome,leap,cast,casting,fling,cleave,cloven,advancing,proclaim,reassure,reassured,crouch,flutter,fluttering,flash,flashing,merge,merged,beneficence,crag,chasm,unvintaged,risen,mote,heinous,suppose,occasion,manage,forced,untoward,condone,fro,offend,vanity,scornful,hotchpotch,littleness,vice,nobility,baseness,direction,instinct,potentially,crossed,monster,depravity,revery,reverie,inspire,tolerance,oneself,enable,eminent,respectable,seriously,vehicle,heard,translate,oftentimes,similarity,connotation,criticism,whom,frequently,ironically,didn,introspective,annoy,annoyed,disturb,disturbed,aspect,reexamine,making,drastic,modify,disconnect,disconnected,disgust,disgusted,desirable,lesson,reflected,awareness,ought,hobby,aggravate,topic,unconnected,broadly,worried,bored,offering,laborer,tire,tired,football,saturday,afternoon,invite,inviting,politician,trifle,secondly,majority,compensation,sustenance,modest,mod,favor,favored,harmony,grudge,enforce,enforced,interruption,absorb,absorbing,outlook,atmosphere,diversion,banish,capacity,tasting,her,capability,limitation,creative,productive,loser,refer,authentically,credible,trustworthy,responsive,genuine,member,concept,putt,putting,pretence,manipulate,difference,opinion,evaluate,conclusion,admire,define,defined,demolish,demolished,bind,wealth,extremely,unexpected,dividend,selfish,strive,infectious,sufferer,miserable,embitter,ridiculous,repel,repelling,attract,rewarding,reality,establish,established,throng,thronged,absence,assured,condemnation,nobleness,attained,pervade,numberless,blade,setting,congenial,feelings,painful,multitude,midst,acquaint,acquainted,merrily,falls,appreciated,enlarge,restlessness,perplexity,vanish,foolish,jealousy,tuck,tucked,subconsciousness,idyllic,travel,traveling,windows,window,car,highway,crossing,cattle,graze,grazing,pour,pouring,wheat,flatlands,roll,skyline,village,hall,destination,wonderful,complete,completed,jigsaw,restlessly,damn,damning,loiter,450sl,mercedes,benz,paid,promotion,retirement,happily,arrive,outdistance,thieve,rob,pacing,counting,she,missed,strange,phenomenon,invest,investing,memorialize,whisper,whispered,reverent,carve,carved,ft,granite,ego,einstein,complication,perceive,life3,aren,snuff,inhabit,laws,law,environment,conform,depress,depressed,evade,dramatic,onto,seize,discovered,wholesome,greater,wearisome,dissipate,companionable,chambers,measured,intervene,diligent,crowded,hives,cambridge,dervish,hoe,lonesome,employ,employed,mercy,folks,folk,recreate,remunerate,hence,ennui,blues,condense,commonly,cheap,musty,agree,etiquette,politeness,tolerable,fireside,certainly,frequency,suffice,hearty,communications,communication,girl,inhabitant,suggest,comparison,convey,loon,walden,lake,pray,angel,waters,mullein,dandelion,bumblebee,millbrook,weathercock,january,spider,standpoint,internal,awkward,adolescence,awkwardly,adapt,follies,folly,intense,profit,easing,ripen,ripening,acquiring,tolerant,gland,ordered,leisure,symphony,resolution,provide,overwhelm,submerge,pistol,leitmotif,hopelessly,dignify,dignified,procession,staccatos,impetuosos,please,majestic,ganges,flow,slowly,eternally,arrangement,conceited,idealist,express,expressed,graphically,passage,religion,largely,intrude,thinker,observed,twice,physiology,belief,ingredient,thoughtfulness,radiate,path,unless,normally,played,fill,fully,consultant,customer,custom,ministrative,virtual,coordination,management,missing,bury,buried,needed,whenever,facing,maybe,papers,valid,relationship,unchecked,lurk,indifference,tragic,ho,enterprise,skepticism,pushing,illness,promote,marketplace,ou,keeping,goal,courageous,pursuit,thankful,overshadow,outweigh,senselessly,destructive,thousand,acts,helping,heal,details,closely,si,cov,ered,foggy,setback,dark,priceless,oppose,forever,quietly,peacefully,john,england,startle,startled,assumed,arrest,arresting,profound,fogged,dim,dimmed,boredom,spots,satisfaction,accompany,accompanied,shortcoming,understandable,forgive,forgivable,eyeglasses,eyeglass,correct,insight,emotional,woe,crumble,foot,fitted,frustration,clutter,cluttered,paralyze,paralyzed,unable,stressful,angry,completely,consume,wiling,effective,dealing,stuffing,actually,proceed,happen,remind,steps,perform,nutshell,weak,reasonable,respiratory,likewise,equilibrium,healthier,sportspeople,missd,reckon,ful,affect,affected,deliver,reduce,interfere,interfering,rome,wasn,built,done,undertake,undertaking,pendulum,perspective,benchmark,parameter,bos,violent,agonize,agonizing,dad,coach,coaching,paddle,creek,vivid,spaceship,lego,vast,meadow,acrobatically,convince,planted,bottomland,prone,chagrin,chagrined,wasted,brutal,conditioned,ended,loathe,surge,surging,kansas,kansa,buoy,horrible,understood,succeed,succeeding,wouldn,owe,reinvigorate,nasty,thrive,struggling,rookie,sow,sown,reap,blister,moisture,pollination,wither,withered,tops,filled,kernel,fallen,below,expectation,sustain,sustained,prestige,prove,prof,technique,across,impressive,expect,expected,theirs,correspond,kant,enjoin,protect,idiosyncrasy,occur,oddity,strike,struck,odd,dictator,magnate,unsatisfactory,write,tempt,attend,attended,exceptional,unexpectedness,singularity,afford,unending,elements,element,inexhaustible,island,surgeon,road,occupy,businessmen,pittsburgh,threshold,janitor,janitresses,salutary,genius,hesitate,comer,assuming,obtain,employment,fairly,advice,fig,foreman,manager,extensive,exclusively,improvement,machinery,investment,apt,summarize,liquor,speculate,indorse,owner,expenditure,revenue,lastly,impatient,emerson,enfold,hidden,shatter,crucify,prune,pruning,ascend,descend,roots,nakedness,thresh,threshing,seasonless,laughter,weep,tears,possessed,sufficient,unto,fulfill,sing,tenderness,bleed,willingly,joyfully,winged,thank,thanks,meditate,eventide,gratitude,payer,overwhelmingly,govern,governed,longing,unbearable,blown,hither,thither,wayward,reaching,relieve,terrible,shiver,consciousness,unfathomable,lifeless,abyss,prefigure,hearts,why,tried,apprehend,pythagorean,achieve,led,heavens,reverberate,famine,victim,torture,tortured,oppressor,hate,hated,mockery,alleviate,gladly,difficult,abrasion,disappointment,collectivity,competition,eliminate,creation,trouble,troubling,purely,celebratory,longevity,fewer,tumultuous,extinct,ah,unrelieved,alongside,obviously,esteem,cultivate,secretly,admit,useless,derange,implication,motif,motive,competence,attainment,posterity,historical,epoch,upbringing,conditions,realm,choicelessness,courageously,cowardice,honorably,dishonorably,either,indifferent,destiny,inscription,afflict,afflicted,bite,bit,reminder,unused,ultimately,heights,kept,polish,polished,unlock,agriculture,department,hugh,miller,toiling,devoted,evening,geologist,mathematician,edmund,publish,published,mathematical,dictionary,mathematics,lad,ferguson,tend,sheep,calculate,calculating,beads,astronomer,vanquish,inconstant,spasmodic,unremitting,vigilance,enduring,cheerful,amuse,amusing,instruct,comfort,comforting,console,consoling,affinity,mutual,entertain,proverb,urn,enshrine,golden,comforter,essence,immortality,lasting,statue,print,sift,grieve,describe,embalm,intellect,thrill,thrilling,specify,specified,condemn,criminal,sphere,strictly,delimit,delimited,wondering,association,emphasize,sharply,keenness,panorama,merry,chasten,certainty,impend,impending,saved,changed,noted,sweetness,buoyant,endless,listless,lethargy,characterize,sens,apply,impairment,blessed,sights,hazily,conscious,stricken,rosy,knee,freshness,temperamental,predominance,enthusiasm,unfailing,covered,cynicism,pessimism,optimism'.split(',')

// 单词数量
const length = keys.length
// 命中计数
let count = 0

// add tests
suite
  .add('Mdict#isExist', () => {
    count = 0
    for (let i = 0; i < length; i++) {
      if (mdict.isExist(keys[i])) {
        count++
      }
    }
  })
  // add listeners
  .on('cycle', (event) => {
    // eslint-disable-next-line no-console
    console.log(String(event.target));
  })
  .on('complete', function cb() {
    const used = process.memoryUsage();
    for (let key in used) {
      // eslint-disable-next-line no-console
      console.log(`${key} ${Math.round(used[key] / 1024 / 1024 * 100) / 100} MB`);
    }
    console.log('hit percent: ', count / length * 100)
  })
  // run async
  .run({ async: true });
